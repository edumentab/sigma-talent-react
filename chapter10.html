<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <title>Learning React  - React Router</title>

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="icon" type="image/x-icon" href="mc2/images/favicon.ico">

    <link rel="stylesheet" href="mc2/styles/reveal.css">
    <link rel="stylesheet" href="mc2/styles/theme.css" id="theme">
    <link rel="stylesheet" href="mc2/styles/code.css">

    
      <link rel="stylesheet" href="styles/react.css">
    

    
  </head>

  <body>
    <div id="pos"></div>
    <div class="reveal">
      <div class="slides">
        <section class="slide chaptertitle">
          <div class="slidecontent">
            <div class="chapternumber"> chapter 10 of 14 </div>
            <h1>React Router</h1>

            
              <span>completing the trinity</span>
            
          </div>
        </section>

        
          <section class="slide" data-pos="10-0-1">
<span class="pos">10-0-1</span>
<div class="slidecontent"><p>So we introduced <strong>Redux</strong> to deal with the <strong>data</strong> in our <strong>React</strong> app. But, what about <strong>navigation</strong>?</p>
</div></section>
        

        
          <section class="slide sectionlist">
            <div class="slidecontent">
              <h3>Sections in this chapter</h3>
              <ol>
                
                  <li><a href="#/3">The&nbsp;need&nbsp;for&nbsp;navigation</a></li>
                
                  <li><a href="#/4">Exploring&nbsp;an&nbsp;example</a></li>
                
                  <li><a href="#/5">Dynamic&nbsp;Routing</a></li>
                
                  <li><a href="#/6">Route&nbsp;Matching&nbsp;Components</a></li>
                
                  <li><a href="#/7">Navigation&nbsp;Components</a></li>
                
                  <li><a href="#/8">Parameters</a></li>
                
                  <li><a href="#/9">Routers</a></li>
                
                  <li><a href="#/10">Leveling&nbsp;Up</a></li>
                
              </ol>
            </div>
          </section>
        

        
          <section>
            <section class="slide sectiontitle">
              <div class="slidecontent">
                <div class='sectioncount'>Section 1/8</div>
                <h3>The need for navigation</h3>

                
                  <p>Where are we going?</p>
                
              </div>
            </section>
            
              <section class="slide" data-pos="10-1-1">
<span class="pos">10-1-1</span>
<div class="slidecontent"><p><strong>SPA</strong> stands for <strong>S</strong>ingle <strong>P</strong>age <strong>A</strong>pplication. This describes the fact that the page <strong>never reloads</strong> in the traditional sense.</p>
<p>We&#39;re dealing with <strong>one single front-end webapp</strong> throughout the session lifetime.</p>
</div></section>
            
              <section class="slide" data-pos="10-1-2">
<span class="pos">10-1-2</span>
<div class="slidecontent"><p>But unless we&#39;re building something very simple, we still <strong>need to provide navigation</strong>.</p>
<p>In a SPA we have <strong>two options</strong> for doing so.</p>
</div></section>
            
              <section class="slide" data-pos="10-1-3">
<span class="pos">10-1-3</span>
<div class="slidecontent"><p><strong>Option 1</strong> is to <strong>handle our own navigation</strong>. Whenever the user clicks something to go to a different view, we catch that event and <strong>repopulate the screen</strong> with whatever the user asked for.</p>
</div></section>
            
              <section class="slide" data-pos="10-1-4">
<span class="pos">10-1-4</span>
<div class="slidecontent"><p>The advantage of this approach is that it is <strong>easy</strong>. We&#39;re in <strong>total control</strong>, and navigation added <strong>no external dependencies</strong>.</p>
</div></section>
            
              <section class="slide" data-pos="10-1-5">
<span class="pos">10-1-5</span>
<div class="slidecontent"><p>There&#39;s a <strong>huge downside</strong>, however: <strong>browser navigation won&#39;t work</strong> in our app, meaning:</p>
<ul>
<li>The user <strong>cannot bookmark</strong> a position in the app</li>
<li>Hitting the <strong>back button means leaving the app</strong> altogether</li>
</ul>
</div></section>
            
              <section class="slide" data-pos="10-1-6">
<span class="pos">10-1-6</span>
<div class="slidecontent"><p>For a serious webapp, these are <strong>dealbreakers</strong>.</p>
<p>Which is why <strong>all frameworks</strong> go with <strong>option 2</strong>, namely to <strong>hook into the browser navigation</strong>. Angular, Ember, Meteor, Aurora - they all have their own <strong>built-in routing</strong> solution.</p>
</div></section>
            
              <section class="slide" data-pos="10-1-7">
<span class="pos">10-1-7</span>
<div class="slidecontent"><p>But <strong>React is not a full framework</strong>. It deals mostly with the view, and doesn&#39;t care how you solve the navigation problem.</p>
<p>If you want to hook into the browser navigation, you have to <strong>do it yourself</strong>.</p>
</div></section>
            
              <section class="slide" data-pos="10-1-8">
<span class="pos">10-1-8</span>
<div class="slidecontent"><p>...or, you can include a <strong>companion library</strong> where someone else has already solved the problem! Which is exactly what <a href="https://github.com/reactjs/react-router" class="link" target="_blank">React Router</a> is.</p>
</div></section>
            
              <section class="slide" data-pos="10-1-9">
<span class="pos">10-1-9</span>
<div class="slidecontent"><p>You can get it via:</p>
<ul>
<li><code>npm install react-router-dom</code> -- DOM bindings</li>
<li><code>npm install react-router-native</code> -- React Native bindings</li>
</ul>
<p><strong> Don&#39;t install <code>react-router</code> directly, instead take one of the above.</strong></p>
</div></section>
            
          </section>
        
          <section>
            <section class="slide sectiontitle">
              <div class="slidecontent">
                <div class='sectioncount'>Section 2/8</div>
                <h3>Exploring an example</h3>

                
                  <p>Routing in the real world</p>
                
              </div>
            </section>
            
              <section class="slide" data-pos="10-2-1">
<span class="pos">10-2-1</span>
<div class="slidecontent"><p>Before we peek under the hood, we&#39;ll explore a simple example app that uses React Router.</p>
<p>Here&#39;s what the <strong>home screen</strong> looks like:</p>
<p><img src="resources/images/routerv4-home.png" alt="home"></p>
<p>Note how the <strong>home</strong> link in the navbar is active.</p>
</div></section>
            
              <section class="slide" data-pos="10-2-2">
<span class="pos">10-2-2</span>
<div class="slidecontent"><p>Clicking on <strong>products</strong> takes us to this list:</p>
<p><img src="resources/images/routerv4-products.png" alt="home"></p>
<p>Now the <strong>Products</strong> link in the nav menu is active.</p>
</div></section>
            
              <section class="slide" data-pos="10-2-3">
<span class="pos">10-2-3</span>
<div class="slidecontent"><p>Finally here&#39;s the screen for a <strong>specific product</strong>:</p>
<p><img src="resources/images/routerv4-lawnmower.png" alt="home"></p>
<p>Note how the <strong>Products</strong> link is still active, since we&#39;re still considered to be in the same section.</p>
</div></section>
            
              <section class="slide" data-pos="10-2-4">
<span class="pos">10-2-4</span>
<div class="slidecontent"><p>As stated a very simple app, yet still enough to catch the most common routing needs.</p>
<p>We&#39;ll be walking through it together, but you can try the demo here: <a href="resources/site/demos/routerv4/index.html" target="_blank">RouterV4</a></p>
</div></section>
            
          </section>
        
          <section>
            <section class="slide sectiontitle">
              <div class="slidecontent">
                <div class='sectioncount'>Section 3/8</div>
                <h3>Dynamic Routing</h3>

                
                  <p>Where to go</p>
                
              </div>
            </section>
            
              <section class="slide" data-pos="10-3-1">
<span class="pos">10-3-1</span>
<div class="slidecontent"><p>Traditional routing solutions tend to be <strong>static routing</strong> solutions.</p>
<ul>
<li>Express</li>
<li>Ember</li>
<li>Angular</li>
<li>React Router (prior to v4)</li>
</ul>
</div></section>
            
              <section class="slide" data-pos="10-3-2">
<span class="pos">10-3-2</span>
<div class="slidecontent"><p>Routes are defined up front, before your app renders.</p>
<pre><code class="lang-javascript">Router.map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">this</span>.route(<span class="hljs-string">'home'</span>);
  <span class="hljs-keyword">this</span>.route(<span class="hljs-string">'about'</span>);
  <span class="hljs-keyword">this</span>.route(<span class="hljs-string">'products'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.route(<span class="hljs-string">'show'</span>, { <span class="hljs-attr">path</span>: <span class="hljs-string">'/:product_id'</span> });
  });
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> Router
</code></pre>
<p><em>example from Ember</em></p>
</div></section>
            
              <section class="slide" data-pos="10-3-3">
<span class="pos">10-3-3</span>
<div class="slidecontent"><p>At the heart of an app using React Router v4+ is the idea of <strong>dynamic routing</strong></p>
<p><strong>Routing takes place as the app is rendering</strong></p>
</div></section>
            
              <section class="slide" data-pos="10-3-4">
<span class="pos">10-3-4</span>
<div class="slidecontent"><p>This in turn closely matches the <strong>component architecture</strong> of React</p>
</div></section>
            
              <section class="slide" data-pos="10-3-5">
<span class="pos">10-3-5</span>
<div class="slidecontent"><p>We use a <code>Route</code> higher order component:</p>
<pre><code class="lang-javascript">&lt;Route exact path=<span class="hljs-string">"/"</span> component={Home}/&gt;
&lt;Route exact path="/products" component={Products}/&gt;
&lt;Route path="/products/:product" component={Product}/&gt;
</code></pre>
</div></section>
            
              <section class="slide" data-pos="10-3-6">
<span class="pos">10-3-6</span>
<div class="slidecontent"><p>This will render either the <code>component</code> (if the path matches) or nothing:</p>
<p><img src="resources/images/routerv4-routes.png" alt="home"></p>
</div></section>
            
              <section class="slide" data-pos="10-3-7">
<span class="pos">10-3-7</span>
<div class="slidecontent"><p>We can nest these however we like:</p>
<pre><code class="lang-javascript"><span class="hljs-comment">//In App:</span>
&lt;Route path=<span class="hljs-string">"products"</span> component={Products}/&gt;

<span class="hljs-keyword">const</span> Products = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    Something about all products
    <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/products/:product"</span> <span class="hljs-attr">component</span>=<span class="hljs-string">{Product}/</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
);</span>
</code></pre>
</div></section>
            
              <section class="slide" data-pos="10-3-8">
<span class="pos">10-3-8</span>
<div class="slidecontent"><p>Even without fully understanding every detail, we can see that the route component gives us a powerful new way of
defining routes.</p>
</div></section>
            
              <section class="slide" data-pos="10-3-9">
<span class="pos">10-3-9</span>
<div class="slidecontent"><p>React Router components are divided into 3 types</p>
<ul>
<li>Route Matching Components</li>
<li>Navigation Components</li>
<li>Routers</li>
</ul>
<p>We&#39;ll explore each of these in the following sections.</p>
</div></section>
            
          </section>
        
          <section>
            <section class="slide sectiontitle">
              <div class="slidecontent">
                <div class='sectioncount'>Section 4/8</div>
                <h3>Route Matching Components</h3>

                
                  <p>Building blocks</p>
                
              </div>
            </section>
            
              <section class="slide" data-pos="10-4-1">
<span class="pos">10-4-1</span>
<div class="slidecontent"><p>We&#39;ve already seen our first <strong>Route Matching Component</strong>:</p>
<ul>
<li><code>Route</code></li>
<li><code>Switch</code></li>
</ul>
</div></section>
            
              <section class="slide" data-pos="10-4-2">
<span class="pos">10-4-2</span>
<div class="slidecontent"><p><code>Route</code> can be included <strong>anywhere</strong> you want to render content based on the location.</p>
</div></section>
            
              <section class="slide" data-pos="10-4-3">
<span class="pos">10-4-3</span>
<div class="slidecontent"><p>You may have noticed the use of the <code>exact</code> prop to determine how matching works.</p>
<pre><code class="lang-javascript">  &lt;Route exact path=<span class="hljs-string">'/'</span> component={Home}/&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">'/about'</span> <span class="hljs-attr">component</span>=<span class="hljs-string">{About}/</span>&gt;</span></span>
</code></pre>
<p>Here the <code>Home</code> component needs to have <code>exact</code> so it isn&#39;t shown at the same time as the <code>About</code> Component</p>
</div></section>
            
              <section class="slide" data-pos="10-4-4">
<span class="pos">10-4-4</span>
<div class="slidecontent"><p>Here <code>Products</code> will be rendered for all of the following routes:</p>
<pre><code class="lang-javascript">  &lt;Route path=<span class="hljs-string">'/products'</span> component={Products}/&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">'/products/:product_id'</span> <span class="hljs-attr">component</span>=<span class="hljs-string">{SingleProduct}/</span>&gt;</span></span>
</code></pre>
<ul>
<li><code>/products</code></li>
<li><code>/products/saw</code></li>
<li><code>/products/blanket</code></li>
</ul>
</div></section>
            
              <section class="slide" data-pos="10-4-5">
<span class="pos">10-4-5</span>
<div class="slidecontent"><p><code>Switch</code> is used to group <code>Route</code>s together</p>
<pre><code class="lang-javascript">&lt;Switch&gt;
  &lt;Route exact path='/' component={Home}/&gt;
  &lt;Route path='/about' component={About}/&gt;
  &lt;Route path='/' component={NotFound}/&gt;
&lt;/Switch&gt;
</code></pre>
<p>Only the first <strong>match</strong> is rendered.</p>
</div></section>
            
              <section class="slide" data-pos="10-4-6">
<span class="pos">10-4-6</span>
<div class="slidecontent"><p>This can be quite handy for dealing with <code>404</code> or <strong>not found</strong> type errors.</p>
</div></section>
            
          </section>
        
          <section>
            <section class="slide sectiontitle">
              <div class="slidecontent">
                <div class='sectioncount'>Section 5/8</div>
                <h3>Navigation Components</h3>

                
                  <p>Links, Links, Links!</p>
                
              </div>
            </section>
            
              <section class="slide" data-pos="10-5-1">
<span class="pos">10-5-1</span>
<div class="slidecontent"><p>We&#39;ll now take a look at how to implement <strong>links</strong> in an app using React Router.</p>
</div></section>
            
              <section class="slide" data-pos="10-5-2">
<span class="pos">10-5-2</span>
<div class="slidecontent"><p>As you perhaps noticed in the <a href="resources/site/demos/routerv4/index.html" target="_blank">RouterV4</a> source,
we can use the <strong><code>Link</code> component</strong> from React Router:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> { Link } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;

<span class="hljs-keyword">let</span> l = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/about"</span>&gt;</span>About<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span></span>;
</code></pre>
<p>When clicked, the link <code>l</code> will navigate to the route <code>/about</code>.</p>
</div></section>
            
              <section class="slide" data-pos="10-5-3">
<span class="pos">10-5-3</span>
<div class="slidecontent"><p>Remember how the navbar links in our example app were <strong>highlighted if the route they linked to was currently active</strong>?</p>
<p><img src="resources/images/routerv4-home.png" alt="home"></p>
</div></section>
            
              <section class="slide" data-pos="10-5-4">
<span class="pos">10-5-4</span>
<div class="slidecontent"><p>We accomplish that by using <code>NavLink</code>s instead.</p>
<p>Then we can set the <code>activeClassName</code> property:</p>
<pre><code class="lang-javascript">&lt;NavLink to=<span class="hljs-string">"/products"</span> activeClassName=<span class="hljs-string">"active"</span>&gt;Products&lt;<span class="hljs-regexp">/NavLink&gt;</span>
</code></pre>
<p>This link will be rendered with the CSS class <strong>active</strong> if our current route matches <code>/about</code>.</p>
</div></section>
            
              <section class="slide" data-pos="10-5-5">
<span class="pos">10-5-5</span>
<div class="slidecontent"><p>Alternatively we can provide styles object directly:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> activeStyle= {
  <span class="hljs-attr">fontWeight</span>: <span class="hljs-string">'bold'</span>
}

<span class="hljs-comment">//...</span>

&lt;NavLink exact to=<span class="hljs-string">"/products"</span> activeStyle={activeStyle}&gt;Products&lt;<span class="hljs-regexp">/NavLink&gt;</span>
</code></pre>
</div></section>
            
              <section class="slide" data-pos="10-5-6">
<span class="pos">10-5-6</span>
<div class="slidecontent"><p>However, this clashes when we link to <code>/</code> since <strong>that route will always match</strong>.</p>
<pre><code class="lang-javascript">&lt;NavLink exact to=<span class="hljs-string">"/"</span> activeStyle={activeStyle}&gt;Home&lt;<span class="hljs-regexp">/NavLink&gt;</span>
</code></pre>
<p>That&#39;s why we use an <code>exact</code> when linking to such a route, to only have it active if we are literally at that route and no other.</p>
</div></section>
            
              <section class="slide" data-pos="10-5-7">
<span class="pos">10-5-7</span>
<div class="slidecontent"><p>Here are the navbar links from the example app demonstrating this:</p>
<pre><code class="lang-javascript">&lt;NavLink exact to="/" activeStyle={activeStyle}&gt;Home&lt;/NavLink&gt;
&lt;NavLink to="/products" activeStyle={activeStyle}&gt;Products&lt;/NavLink&gt;
</code></pre>
</div></section>
            
          </section>
        
          <section>
            <section class="slide sectiontitle">
              <div class="slidecontent">
                <div class='sectioncount'>Section 6/8</div>
                <h3>Parameters</h3>

                
                  <p>There&#39;s no party without them!</p>
                
              </div>
            </section>
            
              <section class="slide" data-pos="10-6-1">
<span class="pos">10-6-1</span>
<div class="slidecontent"><p>You saw them flash by in our example app for the <strong>product item page</strong>. Here&#39;s that route definition again:</p>
<pre><code><span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/products/:product"</span> <span class="hljs-attr">component</span>=<span class="hljs-string">{Product}/</span>&gt;</span>
</code></pre><p>The <strong>colon</strong> makes the last part of the <code>path</code> into a <strong>parameter</strong>.</p>
</div></section>
            
              <section class="slide" data-pos="10-6-2">
<span class="pos">10-6-2</span>
<div class="slidecontent"><p>Which means that if we...</p>
<ul>
<li><strong>navigate</strong> to <strong><code>/products/dishwasher</code></strong></li>
<li>then the route <strong><code>/products/:productid</code></strong> will <strong>match</strong></li>
<li>and the parameter <strong><code>productid</code></strong> will equal <strong><code>dishwasher</code></strong>.</li>
</ul>
</div></section>
            
              <section class="slide" data-pos="10-6-3">
<span class="pos">10-6-3</span>
<div class="slidecontent"><p>Observe that the <strong>colon</strong> is only used in the <strong>routes definition</strong>.</p>
<p>We do <strong>not</strong> use it <strong>in our URL:s</strong> when we navigate or link.</p>
</div></section>
            
              <section class="slide" data-pos="10-6-4">
<span class="pos">10-6-4</span>
<div class="slidecontent"><p>We can see this in action in the <strong>source code for the <code>Product</code> component</strong>:</p>
<pre><code><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> Product = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    So you want to buy a {props.match.params.product}, do you?
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);
</code></pre><p>Note how the <strong>parameters are available</strong> on <code>props.match.params</code>. This is React Router&#39;s doing.</p>
</div></section>
            
          </section>
        
          <section>
            <section class="slide sectiontitle">
              <div class="slidecontent">
                <div class='sectioncount'>Section 7/8</div>
                <h3>Routers</h3>

                
                  <p>Hooking things up</p>
                
              </div>
            </section>
            
              <section class="slide" data-pos="10-7-1">
<span class="pos">10-7-1</span>
<div class="slidecontent"><p>Now the time has come to zoom out and see how to <strong>configure</strong> and <strong>initialize</strong> all this!</p>
</div></section>
            
              <section class="slide" data-pos="10-7-2">
<span class="pos">10-7-2</span>
<div class="slidecontent"><p>Here&#39;s the relevant code from the example app:</p>
<pre><code><span class="hljs-keyword">import</span> { MemoryRouter <span class="hljs-keyword">as</span> Router, Route } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;

ReactDOM.render(
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Router</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      //...
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">Router</span>&gt;</span></span>,
  <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"container"</span>)
);
</code></pre><p>As you can see we use a <code>Router</code> component as a <strong>root component</strong>.</p>
</div></section>
            
              <section class="slide" data-pos="10-7-3">
<span class="pos">10-7-3</span>
<div class="slidecontent"><p><strong>Note the difference</strong> between <code>Router</code> and <code>Route</code>!</p>
<ul>
<li>A <code>Route</code> represents a <strong>single route</strong>, so we have many of those.</li>
<li><code>Router</code> is the <strong>root component</strong>, which receives all <code>Route</code>s as sub-children.</li>
<li>A <code>Router</code> can have exactly 1 child.</li>
</ul>
</div></section>
            
              <section class="slide list" data-pos="10-7-4">
<span class="pos">10-7-4</span>
<div class="slidecontent">
<p>What is the <strong><code>MemoryRouter</code></strong> type? That dictates <strong>how</strong> React Router should <strong>hook up paths to the browser</strong>.</p>
<p>There are 4 different implementations built in;</p>
<ul>
<li><span>a</span><strong><code>MemoryRouter</code></strong></li>
<li><span>b</span><strong><code>HashRouter</code></strong></li>
<li><span>c</span><strong><code>BrowserRouter</code></strong></li>
<li><span>d</span><strong><code>StaticRouter</code></strong></li>
</ul>
<p>We&#39;ll now take a quick look at each of them.</p>
</div></section>
            
              <section class="slide num numA" data-pos="10-7-5">
<span class="pos">10-7-5</span>
<div class="slidecontent">
<p><strong><code>MemoryRouter</code></strong> doesn&#39;t connect to the browser at all, but instead <strong>handles the navigation state in memory</strong>. Much like <strong>Option 1</strong> for SPA:s that we mentioned initially as an example of what not to do.</p>
</div></section>
            
              <section class="slide" data-pos="10-7-6">
<span class="pos">10-7-6</span>
<div class="slidecontent"><p>So why would we want to use <code>MemoryRouter</code>? Three main reasons:</p>
<ul>
<li>For <strong>small apps that are living inside a larger app</strong>, for example a JSBin demo</li>
<li>For rendering our apps <strong>server side</strong> where there is no browser</li>
<li>For <strong>testing</strong></li>
<li>For <strong>React Native</strong></li>
</ul>
<p>Our example falls under the first point.</p>
</div></section>
            
              <section class="slide num numB" data-pos="10-7-7">
<span class="pos">10-7-7</span>
<div class="slidecontent">
<p>If we used <strong><code>HashRouter</code></strong> then the app <strong>path lives in the hash of the URL</strong>:</p>
<p><img src="resources/images/router-hash-url.png" alt="hash"></p>
</div></section>
            
              <section class="slide num numC" data-pos="10-7-8">
<span class="pos">10-7-8</span>
<div class="slidecontent">
<p>If we instead used <strong><code>BrowserRouter</code></strong> then we&#39;d get a clean, &quot;regular&quot; URL with no hashes or artifacts.</p>
<p>But this <strong>requires server-side configuration</strong> to handle the case when the user starts somewhere else other than the root, which is why the example app doesn&#39;t use it.</p>
</div></section>
            
              <section class="slide num numD" data-pos="10-7-9">
<span class="pos">10-7-9</span>
<div class="slidecontent">
<p><code>StaticRouter</code> is a <code>Router</code> that never changes location.</p>
<p>It&#39;s helpful for testing, or server side rendering.</p>
</div></section>
            
          </section>
        
          <section>
            <section class="slide sectiontitle">
              <div class="slidecontent">
                <div class='sectioncount'>Section 8/8</div>
                <h3>Leveling Up</h3>

                
                  <p>FAQ time!</p>
                
              </div>
            </section>
            
              <section class="slide" data-pos="10-8-1">
<span class="pos">10-8-1</span>
<div class="slidecontent"><p>We introduced <code>Route</code> using the <code>component</code> setup:</p>
<pre><code class="lang-javascript">&lt;Route exact path=<span class="hljs-string">"/"</span> component={Home}/&gt;
</code></pre>
</div></section>
            
              <section class="slide question" data-pos="10-8-2">
<span class="pos">10-8-2</span>
<div class="slidecontent">
<p>So one question you might have is how to pass <strong>props</strong> to a component?</p>
</div></section>
            
              <section class="slide answer" data-pos="10-8-3">
<span class="pos">10-8-3</span>
<div class="slidecontent">
<p>Use the <code>render</code> type of <code>Route</code> instead of <code>component</code>:</p>
<pre><code class="lang-javascript">&lt;Route exact path=<span class="hljs-string">"/products"</span> render={ (props) =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Products</span> {<span class="hljs-attr">...props</span>} <span class="hljs-attr">products</span>=<span class="hljs-string">{products}/</span>&gt;</span>
)} /&gt;</span>
</code></pre>
<p>We can see this in the <a href="resources/site/demos/routerv4render/index.html" target="_blank">RouterV4Render</a> demo.</p>
</div></section>
            
              <section class="slide" data-pos="10-8-4">
<span class="pos">10-8-4</span>
<div class="slidecontent"><p>A couple of guidelines:</p>
<ul>
<li>Don&#39;t use both <code>component</code> <strong>and</strong> <code>render</code></li>
<li>Don&#39;t pass a lambda into <code>component</code> (will cause mount/un-mount on every render)</li>
</ul>
</div></section>
            
              <section class="slide" data-pos="10-8-5">
<span class="pos">10-8-5</span>
<div class="slidecontent"><h3 id="handling-authenticated-routes">Handling Authenticated Routes</h3>
<p>There is one other route matching component: <code>Redirect</code></p>
<pre><code class="lang-javascript">&lt;Redirect to=<span class="hljs-string">"/somewhere/else"</span> /&gt;
</code></pre>
</div></section>
            
              <section class="slide" data-pos="10-8-6">
<span class="pos">10-8-6</span>
<div class="slidecontent"><p>Using this we can create a <code>ProtectedRoute</code> component:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> isLoggedIn = <span class="hljs-literal">true</span>;

<span class="hljs-keyword">const</span> ProtectedRoute = <span class="hljs-function">(<span class="hljs-params">{ component: Component, ...rest}</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> &lt;Route {...rest}
           render={
             props =&gt;
               isLoggedIn
                 ? &lt;Component {...props}/&gt;
                 : &lt;Redirect to="/login" /&gt;
           } /&gt;
};
</code></pre>
<p>As seen in the <a href="resources/site/demos/routerv4auth/index.html" target="_blank">RouterV4Auth</a> demo.</p>
</div></section>
            
              <section class="slide" data-pos="10-8-7">
<span class="pos">10-8-7</span>
<div class="slidecontent"><h3 id="accessing-history-and-location">Accessing history and location</h3>
<p>Sometimes we need to access the current location, or the history from
a component.</p>
</div></section>
            
              <section class="slide" data-pos="10-8-8">
<span class="pos">10-8-8</span>
<div class="slidecontent"><p>We can use the <code>withRouter()</code> higher-order component to add the following props:</p>
<ul>
<li>match</li>
<li>location</li>
<li>history</li>
</ul>
</div></section>
            
              <section class="slide" data-pos="10-8-9">
<span class="pos">10-8-9</span>
<div class="slidecontent"><pre><code class="lang-javascript"><span class="hljs-keyword">import</span> { withRouter } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;

<span class="hljs-keyword">const</span> AddressBar = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    Address: <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{props.location.pathname}/</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">hr</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
);
export const AddressBarWithRouter = withRouter(AddressBar);</span>
</code></pre>
<p><a href="resources/site/demos/routerv4/index.html#addressbar_js" target="_blank">RouterV4 Address Bar</a></p>
</div></section>
            
          </section>
        

        
      </div>
    </div>

    <script type="text/javascript">
      var basehref = window.location.href.replace(/chapter\d.*?$/,'')

      document.addEventListener("keydown", function(e) {
        var code = e.which || e.keyCode;
        if (code === 13) {
          window.location.href = basehref+"index.html?from=9";
        } else if (code >= 49 && code <= 8 + 48) {
          window.location.hash = "#/" + (code-48+1+1);
        }
        if (10 < 14) {
          if (code === 99 || e.key === 'c') { // the letter C for next Chapter
            window.location.href = basehref+"chapter11.html"
          }
        }
      });
    </script>
    <script src="mc2/scripts/head.js" type="text/javascript"></script>
    <script src="mc2/scripts/reveal.js" type="text/javascript"></script>
    <script src="mc2/scripts/jquery.js" type="text/javascript"></script>
    <script type="text/javascript">
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,
        showNotes: false,
        transition: 'slide',
        dependencies: [
          { src: 'mc2/scripts/plugin/notes/notes.js', async: true }
        ]
      });

      window.onload = function() {
        var links = document.querySelectorAll("a.link");
        for(var i = 0; i < links.length; i++){
          var link = links[i];
          link.innerHTML = link.innerHTML.replace(/ /g,'&nbsp;')
        }
        var posElem = document.getElementById('pos')
        function updateReference() {
          setTimeout(function() {
            var currentpos = document.querySelector('section.present[data-pos]')
            if (currentpos) {
              posElem.innerHTML = currentpos.getAttribute('data-pos')
            } else {
              posElem.innerHTML = ''
            }
            if (document.querySelector('.present.chaptertitle')) {
              document.body.classList.add('atchaptertitle');
            } else {
              document.body.classList.remove('atchaptertitle');
            }
          }, 10);
        }

        window.addEventListener("hashchange",updateReference);

        updateReference();
      };
    </script>

    
  </body>
</html>
